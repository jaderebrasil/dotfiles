#!/bin/sh

# Prints all batteries, their percentage remaining and an emoji corresponding
# to charge status (ğŸ”Œ for plugged up, ğŸ”‹ for discharging on battery, etc.).
# ğŸ›‘ â™»: ğŸ”Œ âš¡ â—

case $BLOCK_BUTTON in
    3) notify-send "ğŸ”‹ Battery module" "ğŸ”‹: discharging
ï± : not charging
ï—Ÿ: stagnant charge
ï‡¦: charging
ï—§: charged
ï„ª: battery very low!" ;;
esac

# ï‰€  ï‰  ï‰‚  ï‰ƒ  ï‰„  ï—§  ï‡¦  ï±  #fontawesome
# s/Discharging/ï‰€ /;s/Not charging/ï± /;s/Charging/ï‡¦/;s/Unknown/ï—Ÿ/;s/Full/ï—§/

# ï•¸ ï– ï–€ ï•¿ ï•¾ ï•½ ï•¼ ï•» ï•º ï•¹ ï–‚ ï–ƒ ï– ï– #nerd-icons
# Loop through all attached batteries.
for battery in /sys/class/power_supply/BAT?
do
	# Get its remaining capacity and charge status.
	capacity=$(cat "$battery"/capacity) || break
	status=$(sed "s/Discharging/ï•¸/;s/Not charging/ï–‚/;s/Charging/ï–ƒ/;s/Unknown/ï–/;s/Full/ï–/" "$battery"/status)

     [ "$capacity" == 100 ] && [ "$status" = "ï–" ] && status="ï–"
	 [ "$capacity" -le 90 ] && [ "$status" = "ï•¸" ] && status="ï–"
	 [ "$capacity" -le 80 ] && [ "$status" = "ï•¸" ] && status="ï–€"
	 [ "$capacity" -le 70 ] && [ "$status" = "ï•¸" ] && status="ï•¿"
	 [ "$capacity" -le 60 ] && [ "$status" = "ï•¸" ] && status="ï•¾"
	 [ "$capacity" -le 50 ] && [ "$status" = "ï•¸" ] && status="ï•½"
	 [ "$capacity" -le 40 ] && [ "$status" = "ï•¸" ] && status="ï•¼"
	 [ "$capacity" -le 30 ] && [ "$status" = "ï•¸" ] && status="ï•»"
	 [ "$capacity" -le 20 ] && [ "$status" = "ï•¸" ] && status="ï•º" && warn="ï„ª"
	 [ "$capacity" -le 10 ] && [ "$status" = "ï•¸" ] && status="ï•¹" && warn="ï„ª"

	printf "%s%s %s%% " "$status" "$warn" "$capacity"
	unset warn
done | sed 's/ *$//'

echo ""
